<% layout("/layouts/boilerplate") %>
<body>
  <form
    action="/listings"
    method="post"
    class="container mt-5 p-4 bg-white rounded-4 shadow needs-validation"
    style="max-width: 500px"
    novalidate
  >
    <h3 class="text-center mb-4 text-blue fw-semibold">Create Listing</h3>

    <input
      type="text"
      class="form-control mb-3 py-2"
      name="Listing[title]"
      placeholder="Title"
      required
    />
    <div class="invalid-feedback">Please enter a title.</div>

    <textarea
      class="form-control mb-3 py-2"
      name="Listing[description]"
      placeholder="Description"
      rows="3"
      required
    ></textarea>
    <div class="invalid-feedback">Please enter a description.</div>

    <input
      type="text"
      class="form-control mb-3 py-2"
      name="Listing[image][url]"
      placeholder="Image URL"
    />

    <div class="row g-3 mb-3">
      <div class="col-md-6">
        <input
          type="number"
          class="form-control py-2"
          name="Listing[price]"
          placeholder="Price"
          required
          min="1"
        />
        <div class="invalid-feedback">Enter a valid price.</div>
      </div>
      <div class="col-md-6">
        <input
          type="text"
          class="form-control py-2"
          name="Listing[country]"
          placeholder="Country"
          required
        />
        <div class="invalid-feedback">Enter a country.</div>
      </div>
    </div>

    <input
      type="text"
      class="form-control mb-3 py-2"
      name="Listing[location]"
      placeholder="Location"
      required
    />
    <div class="invalid-feedback">Please enter a location.</div>

    <button class="btn btn-dark w-100 py-2 fw-semibold" type="submit">
      Add Listing
    </button>
  </form>

  <script>
    (() => {
      "use strict";
      const forms = document.querySelectorAll(".needs-validation");
      Array.from(forms).forEach((form) => {
        form.addEventListener(
          "submit",
          (event) => {
            if (!form.checkValidity()) {
              event.preventDefault();
              event.stopPropagation();
            }
            form.classList.add("was-validated");
          },
          false
        );
      });
    })();
  </script>
</body>
